{"ast":null,"code":"import _classCallCheck from\"/home/utilisateur/village_emploi/fullstack/crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/utilisateur/village_emploi/fullstack/crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/utilisateur/village_emploi/fullstack/crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/utilisateur/village_emploi/fullstack/crm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import firebase from'../firebase';import Grid from'./Grid';import Form from'./Form';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={contacts:[]};return _this;}_createClass(App,[{key:\"updateData\",value:function updateData(){var _this2=this;var db=firebase.firestore();//const settings = {timestampsInSnapshots: true};\n//db.settings(settings);\ndb.collection('contacts').get().then(function(snapshot){var contacts=[];snapshot.forEach(function(doc){var contact=Object.assign({id:doc.id},doc.data());contacts.push(contact);});_this2.setState({contacts:contacts});}).catch(function(err){console.log('Erreur!',err);});}},{key:\"deleteData\",value:function deleteData(docID){var db=firebase.firestore();//const settings = {timestampsInSnapshots: true};\n//db.settings(settings);\ndb.collection('contacts').doc(docID).delete();this.updateData();}},{key:\"componentWillMount\",value:function componentWillMount(){this.updateData();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-fixed\"},/*#__PURE__*/React.createElement(\"nav\",{className:\"blue lighten-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"nav-wrapper\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/\",className:\"brand-logo center\"},\"Contacts\")))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{updateData:this.updateData.bind(this)}),/*#__PURE__*/React.createElement(Grid,{items:this.state.contacts,deleteData:this.deleteData.bind(this)})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/utilisateur/village_emploi/fullstack/crm/src/components/App.js"],"names":["React","Component","firebase","Grid","Form","App","props","state","contacts","db","firestore","collection","get","then","snapshot","forEach","doc","contact","Object","assign","id","data","push","setState","catch","err","console","log","docID","delete","updateData","bind","deleteData"],"mappings":"ooBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,C,GAEMC,CAAAA,G,0FACJ,aAAYC,KAAZ,CAAmB,qCACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,EADC,CAAb,CAFiB,aAKlB,C,+DAEU,iBACX,GAAMC,CAAAA,EAAE,CAAGP,QAAQ,CAACQ,SAAT,EAAX,CACA;AACA;AAEAD,EAAE,CAACE,UAAH,CAAc,UAAd,EAA0BC,GAA1B,GACGC,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,GAAIN,CAAAA,QAAQ,CAAG,EAAf,CACAM,QAAQ,CAACC,OAAT,CAAiB,SAACC,GAAD,CAAS,CACxB,GAAIC,CAAAA,OAAO,CAAGC,MAAM,CAACC,MAAP,CAAc,CAACC,EAAE,CAAEJ,GAAG,CAACI,EAAT,CAAd,CAA6BJ,GAAG,CAACK,IAAJ,EAA7B,CAAd,CACAb,QAAQ,CAACc,IAAT,CAAcL,OAAd,EACD,CAHD,EAIA,MAAI,CAACM,QAAL,CAAc,CACZf,QAAQ,CAAEA,QADE,CAAd,EAGD,CAVH,EAWGgB,KAXH,CAWS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBF,GAAvB,EACD,CAbH,EAcC,C,8CAEUG,K,CAAO,CAChB,GAAMnB,CAAAA,EAAE,CAAGP,QAAQ,CAACQ,SAAT,EAAX,CACA;AACA;AAEAD,EAAE,CAACE,UAAH,CAAc,UAAd,EAA0BK,GAA1B,CAA8BY,KAA9B,EAAqCC,MAArC,GACA,KAAKC,UAAL,GACD,C,+DAEoB,CACnB,KAAKA,UAAL,GACD,C,uCAEQ,CACP,mBACE,4CACE,2BAAK,SAAS,CAAC,cAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,yBAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,mBAAtB,aADF,CADF,CADF,CADF,cAQE,4CACE,oBAAC,IAAD,EAAM,UAAU,CAAE,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB,EADF,cAEE,oBAAC,IAAD,EAAM,KAAK,CAAE,KAAKxB,KAAL,CAAWC,QAAxB,CAAkC,UAAU,CAAE,KAAKwB,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAA9C,EAFF,CARF,CADF,CAeD,C,iBA1De9B,S,EA6DlB,cAAeI,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport firebase from '../firebase';\nimport Grid from './Grid';\nimport Form from './Form';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      contacts: []\n     };\n  }\n\nupdateData() {\n  const db = firebase.firestore();\n  //const settings = {timestampsInSnapshots: true};\n  //db.settings(settings);\n\n  db.collection('contacts').get()\n    .then((snapshot) => {\n      let contacts = [];\n      snapshot.forEach((doc) => {\n        let contact = Object.assign({id: doc.id }, doc.data());\n        contacts.push(contact);\n      });\n      this.setState({\n        contacts: contacts\n      });\n    })\n    .catch((err) => {\n      console.log('Erreur!', err);\n    });\n  } \n  \n  deleteData(docID) {\n    const db = firebase.firestore();\n    //const settings = {timestampsInSnapshots: true};\n    //db.settings(settings);\n\n    db.collection('contacts').doc(docID).delete();\n    this.updateData();\n  }\n\n  componentWillMount() {\n    this.updateData();\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"navbar-fixed\">\n          <nav className=\"blue lighten-2\">\n            <div className=\"nav-wrapper\">\n              <a href=\"/\" className=\"brand-logo center\">Contacts</a>\n            </div>\n          </nav>\n        </div>\n        <div>\n          <Form updateData={this.updateData.bind(this)}/>\n          <Grid items={this.state.contacts} deleteData={this.deleteData.bind(this)}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}